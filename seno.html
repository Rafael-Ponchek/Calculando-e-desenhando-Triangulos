<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Triângulo com Seno, Cosseno e Tangente</title>
     <style>*{
 margin: 0;
 padding: 0;
 font-family: Verdana, Geneva, Tahoma, sans-serif;
 font-size: 15px;
 text-align: center;
}
body{ 
    background-color: antiquewhite;
}

.in{
     background-color: rgba(76, 76, 253, 0.39);
     margin: 1%;
     margin-top: 2%;
     font-size: 180%;
}
.in::placeholder{
    color: black;

}
.in:focus{
      background-color: rgba(76, 76, 253, 0.39);

}
.bo{
    text-align: center;
    margin: 1.8%;
    background-color:  orange;
    border-radius: 5px;
    border-color: black;
    padding: 6%;
    font-size: 160%;
}

#canvas{
   display: flex;
   justify-content: center;
   align-items: center;

}


</style>
  <script>
     alert("Todos números com virgulas devem ser subu=istituidos por pontos <br/> ,=.")
        function caucularangulo(){
            let co= parseFloat(document.getElementById("co").value);
            let hip= parseFloat(document.getElementById("hip").value);
            let altura = parseFloat(document.getElementById("altura").value);
            co = co+altura;
            let sen = co/hip;
            let ansen = Math.asin(sen);
            let angulo = ansen*(180/Math.PI);
            if((!hip) || (!co) || co>hip){
              alert("Por favor adicione valido a altura e/ou a hipotenusa");
            }
            else{
              if(!altura){
                alert("Você não colocou sua altura, mas o angulo é de: "+ angulo.toFixed(0)+ "°graus ou "+ sen.toFixed(3));
              }
              else{
                alert("O angulo é de "+ angulo.toFixed(0)+ "°graus ou "+ sen.toFixed(3) );
              }
            }
        }
        function caucularCO(){
            let angulo = parseFloat(document.getElementById("angulos").value);
            angulo = (angulo*(Math.PI/180));
            let altura = parseFloat(document.getElementById("altura").value);
            let sen = Math.sin(angulo).toFixed(3);
            let hip = parseFloat(document.getElementById("hip").value);
            let co = hip*sen;
            if ((!hip) || (!angulo) ){ 
              alert("Por favor adicione o angulo e/ou a hipotenusa");
            }
            else{
              if(!altura){
              alert("Você não colocou sua altura, mas a altura do triangulo é: "+ co.toFixed(2)+ " m");
              }
              else{
                co = co + altura
              alert("A altura é de ≈ "+ co.toFixed(2)+ " m");
              }
            }
        }

        function caucularHIP(){
            let angulo = parseFloat(document.getElementById("angulos").value);
            angulo = (angulo*(Math.PI/180));
            let altura = parseFloat(document.getElementById("altura").value);
            let sen = Math.sin(angulo).toFixed(3);
            let co = parseFloat(document.getElementById("co").value)
            
             if ((!co) || (!angulo) ){ 
              alert("Por favor adicione o angulo e/ou a altura");
            }
            else{
              if(!altura){
                let hip = co/sen;
                alert("Você não colocou sua altura, mas a hipotenusa do triangulo é: "+ hip.toFixed(2)+ " m");
              }
              else{
              co = co + altura;
              hip = co/sen;
              alert("A sua hipotenusa é de ≈ "+ hip.toFixed(2)+ " m");
             }
            }
          }

            function caucularCA(){
            let hip = parseFloat(document.getElementById("hip").value);
            let co = parseFloat(document.getElementById("co").value);
            let altura = parseFloat(document.getElementById("altura").value);
            if ((!hip) || (!co) ){ 
              alert("Por favor adicione a alturado objeto e/ou a hipotenusa");
            }
            else{
              if(!altura){
                let ca = Math.sqrt(hip*hip-co*co)
              alert("Você não colocou sua altura, mas a base do triangulo é: "+ ca.toFixed(2)+ "m");
              }
              else{
                 co = co + altura;
                 let ca = Math.sqrt(hip*hip-co+altura*co)
              alert("A base é de ≈ "+ ca.toFixed(2)+ "m");
              }
            }
        }
          function desenharTriangulo1() {
      let ang = parseFloat(document.getElementById("angulos").value);
      let co = parseFloat(document.getElementById("co").value);
      let hip = parseFloat(document.getElementById("hip").value);
      let altura = parseFloat(document.getElementById("altura").value);
            if(!altura){
      alert("Você não colocou a sua altura mas o desenho está a baixo");
      }
      else{
      co = co + altura;
      }
      // Se o ângulo e um lado forem informados, calcula o outro
      if (!isNaN(ang) && ang > 0 && ang < 90) {
        let rad = ang * Math.PI / 180;
        if (!isNaN(hip) && isNaN(co)) {
          co = hip * Math.sin(rad);
          document.getElementById("co").value = co.toFixed(2);
        } else if (!isNaN(co) && isNaN(hip)) {
          hip = co / Math.sin(rad);
          document.getElementById("hip").value = hip.toFixed(2);
        }
      }

      // Verificação final
      if (isNaN(co) || isNaN(hip) || co <= 0 || hip <= 0) {
        alert("Por favor, insira ângulo + um lado, ou dois lados.");
        return;
      }

      // Cálculos
      let ca = Math.sqrt(hip ** 2 - co ** 2);
      let angulo1 = Math.asin(co / hip) * (180 / Math.PI);
      let angulo2 = 90 - angulo1;

      // --- Desenho ---
      let canvas = document.getElementById("canvas");
      let ctx = canvas.getContext("2d");
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Escala automática
      let escala = Math.min(canvas.width / (ca * 1.5), canvas.height / (co * 1.5));

      // Pontos
      let x0 = 50;
      let y0 = canvas.height - 50;
      let x1 = x0 + ca * escala;
      let y1 = y0;
      let x2 = x0;
      let y2 = y0 - co * escala;

      // Triângulo
      ctx.beginPath();
      ctx.moveTo(x0, y0);
      ctx.lineTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.closePath();
      ctx.fillStyle = "#b3d9ff";
      ctx.fill();
      ctx.strokeStyle = "#000";
      ctx.lineWidth = 2;
      ctx.stroke();

      // Medidas
      ctx.fillStyle = "black";
      ctx.font = "14px Arial";
      ctx.fillText("CO = " + co.toFixed(2) + " m", x0 - 55, (y0 + y2) / 2);
      ctx.fillText("CA = " + ca.toFixed(2) + " m", (x0 + x1) / 2 - 20, y0 + 20);
      ctx.fillText("H = " + hip.toFixed(2) + " m", (x1 + x2) / 2 + 20, (y1 + y2) / 2);

      // ==== Marcação dos ângulos ====
      ctx.lineWidth = 2;
      ctx.strokeStyle = "red";

      // Ângulo da base direita
      if (Math.abs(angulo1 - 90) < 0.1) {
        let t = 20;
        ctx.beginPath();
        ctx.moveTo(x1 - t, y1);
        ctx.lineTo(x1 - t, y1 - t);
        ctx.lineTo(x1, y1 - t);
        ctx.stroke();
      } else {
        let raio = 35;
        ctx.beginPath();
        ctx.arc(x1, y1, raio, Math.PI, Math.PI + (angulo1 * Math.PI / 180), false);
        ctx.stroke();
      }

      // Ângulo de 90° (base esquerda)
      ctx.beginPath();
      ctx.moveTo(x0 + 25, y0);
      ctx.lineTo(x0 + 25, y0 - 25);
      ctx.lineTo(x0, y0 - 25);
      ctx.stroke();

      // Ângulo do topo
      if (Math.abs(angulo2 - 90) < 0.1) {
        let t = 20;
        ctx.beginPath();
        ctx.moveTo(x2, y2 + t);
        ctx.lineTo(x2 + t, y2 + t);
        ctx.lineTo(x2 + t, y2);
        ctx.stroke();
      } else {
          let raio2 = 35;
          ctx.beginPath();
          // Agora o arco é desenhado para dentro do triângulo
          let startAngle = Math.atan2(y0 - y2, x0 - x2); // direção do cateto vertical
          let endAngle = startAngle - (angulo2 * Math.PI / 180);
          ctx.arc(x2, y2, raio2, startAngle, endAngle, true);
          ctx.stroke();
       }
       
        // let raio2 = 35;
        // ctx.beginPath();
        // let inicio = -Math.PI / 2;
        // let fim = inicio - (angulo2 * Math.PI / 180);
        // ctx.arc(x2, y2, raio2, inicio, fim, true);
        // ctx.stroke();
      // }

      // Textos dos ângulos
  ctx.fillStyle = "black";
            ctx.font = "14px Arial";
            ctx.fillText(angulo1.toFixed(1) + "°", x1 - 55, y1 - 10);
            ctx.fillText("90°", x0 + 15, y0 - 15);
            ctx.fillText(angulo2.toFixed(1) + "°", x2 + 10, y2 + 15);


    }
</script>
</head>
<body>
  <input class="in" type="number" id="altura" placeholder="Digite a sua altura">
  <input class="in" type="number" id="angulos" placeholder="Digite o angulo">
  <input class="in" type="number" id="co" placeholder="Digite a altura do objeto (m)">
  <input class="in" type="number" id="hip" placeholder="Digite a hipotenusa(m)">
  <button class="bo" onclick="caucularangulo()">Calcular angulo</button>
  <button class="bo" onclick="caucularCO()">Calcular a altura do objeto</button>
  <button class="bo" onclick="caucularCA()">Calcular a base</button>
  <button class="bo" onclick="caucularHIP()">Calcular hipotenusa</button>
  <button class="bo" onclick="desenharTriangulo1()">Desenhar Triângulo</button>
  <br><br>
  <canvas id="canvas" width="500" height="350"></canvas>

</body>
</html>